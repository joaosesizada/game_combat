<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Jogo de Combate</title>
</head>
<body>
    <canvas id="gameCanvas" width="1200" height="800"></canvas>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/client.js" type="module"></script>
    <link rel="stylesheet" href="/css/game.css">
</body>
<script>
        // Supondo que a rota seja /game/:roomId, extraia o roomId da URL.
    const roomId = window.location.pathname.split('/').pop(); 

    const socket = io();

    // Quando o socket se conectar, envia o "addPlayer" com o roomId
    socket.on('connect', () => {
    socket.emit('addPlayer', { roomId });
    });

    // Se desejar, logo após o "addPlayer", solicitar que o jogo inicie.
    // Pode ser que o servidor decida quando iniciar (ex: ao ter 2 jogadores) ou imediatamente.
    socket.on("updateRoom", (data) => {
    console.log("Sala atualizada:", data);
    // Se for para iniciar imediatamente, é possível emitir "startGame".
    // Atenção: se a regra for “inicia quando há 2 jogadores”, verifique o número de jogadores.
    if (data.room.players.length >= 1) {  // ajuste a condição se necessário
        socket.emit("startGame", { roomId });
    }
    });

</script>
</html>
